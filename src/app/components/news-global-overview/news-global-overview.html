@if (loading()) {
  <div class="flex h-96 items-center justify-center">
    <div class="text-center">
      <div class="mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-b-2 border-yellow-500"></div>
      <p class="text-sm text-gray-400">Cargando datos del mercado global...</p>
    </div>
  </div>
} @else if (error()) {
  <div class="flex h-96 items-center justify-center">
    <div class="text-center">
      <p class="text-sm text-red-500">{{ error() }}</p>
    </div>
  </div>
} @else {
  <div class="space-y-8">
    <div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3">
      <div class="rounded-lg border border-gray-800 bg-gray-950/80 p-6">
        <div class="mb-2 flex items-center justify-between text-gray-400">
          <h3 class="text-sm font-medium uppercase tracking-wide">Capitalizaci√≥n total</h3>
          <span class="text-2xl">üí∞</span>
        </div>
        <p class="text-2xl font-semibold text-white">{{ globalData?.totalMarketCap | number: '1.0-0' }}</p>
      </div>

      <div class="rounded-lg border border-gray-800 bg-gray-950/80 p-6">
        <div class="mb-2 flex items-center justify-between text-gray-400">
          <h3 class="text-sm font-medium uppercase tracking-wide">Volumen 24h</h3>
          <span class="text-2xl">üìä</span>
        </div>
        <p class="text-2xl font-semibold text-white">{{ globalData?.totalVolume24h | number: '1.0-0' }}</p>
      </div>

      <div class="rounded-lg border border-gray-800 bg-gray-950/80 p-6">
        <div class="mb-2 flex items-center justify-between text-gray-400">
          <h3 class="text-sm font-medium uppercase tracking-wide">Dominancia BTC</h3>
          <span class="text-2xl">‚Çø</span>
        </div>
        <p class="text-2xl font-semibold text-white">{{ globalData?.btcDominance | number: '1.0-2' }}%</p>
        <div class="mt-3 h-2 w-full rounded-full bg-gray-800">
          <div
            class="h-2 rounded-full bg-orange-500"
            [style.width.%]="globalData?.btcDominance ?? 0"
          ></div>
        </div>
      </div>

      <div class="rounded-lg border border-gray-800 bg-gray-950/80 p-6">
        <div class="mb-2 flex items-center justify-between text-gray-400">
          <h3 class="text-sm font-medium uppercase tracking-wide">Dominancia ETH</h3>
          <span class="text-2xl">Œû</span>
        </div>
        <p class="text-2xl font-semibold text-white">{{ globalData?.ethDominance | number: '1.0-2' }}%</p>
        <div class="mt-3 h-2 w-full rounded-full bg-gray-800">
          <div
            class="h-2 rounded-full bg-purple-500"
            [style.width.%]="globalData?.ethDominance ?? 0"
          ></div>
        </div>
      </div>

      <div class="rounded-lg border border-gray-800 bg-gray-950/80 p-6">
        <div class="mb-2 flex items-center justify-between text-gray-400">
          <h3 class="text-sm font-medium uppercase tracking-wide">Criptomonedas activas</h3>
          <span class="text-2xl">ü™ô</span>
        </div>
        <p class="text-2xl font-semibold text-white">{{ globalData?.totalCryptos | number: '1.0-0' }}</p>
      </div>

      
    </div>

    @if (fearGreedIndex) {
      <div class="rounded-lg border border-gray-800 bg-gray-950/80 p-6">
        <h3 class="mb-4 text-lg font-semibold text-white">√çndice de Miedo y Avaricia</h3>
        <div class="flex flex-col gap-6 md:flex-row md:items-center">
          <div [ngClass]="getFearGreedColor(fearGreedIndex.value)" class="rounded-lg p-6">
            <p class="text-sm font-medium text-white/80">√çndice actual</p>
            <p class="text-4xl font-bold">{{ fearGreedIndex.value }}</p>
            <p class="mt-2 text-xs uppercase tracking-wide text-white/70">{{ fearGreedIndex.classification }}</p>
          </div>
          <div class="flex-1">
            <div class="relative mb-2 h-8 rounded-lg bg-gradient-to-r from-red-500 via-yellow-500 to-green-600"></div>
            <div class="flex justify-between text-xs text-gray-400">
              <span>Miedo</span>
              <span>Neutral</span>
              <span>Avaricia</span>
            </div>
            <p class="mt-4 text-xs text-gray-500">Actualizado: {{ fearGreedIndex.date }}</p>
          </div>
        </div>
      </div>
    }

    @if (trendingCoins.length > 0) {
      <div class="rounded-lg border border-gray-800 bg-gray-950/80 p-6">
        <h3 class="mb-4 text-lg font-semibold text-white">Criptomonedas en tendencia</h3>
        <div class="grid grid-cols-2 gap-4 md:grid-cols-3 lg:grid-cols-6">
          @for (coin of trendingCoins; track coin.id) {
            <div
              class="flex flex-col items-center rounded-lg border border-gray-800 bg-gray-900/70 p-4 transition-colors hover:border-gray-700 hover:bg-gray-900"
            >
              <img
                [src]="coin.thumb || '/assets/placeholder.svg'"
                [alt]="coin.name"
                class="mb-2 h-12 w-12 rounded-full"
              />
              <p class="text-center text-sm font-semibold text-white">{{ coin.name }}</p>
              <p class="text-xs uppercase tracking-wide text-gray-400">{{ coin.symbol }}</p>
              @if (coin.price !== undefined) {
                <p class="mt-1 text-xs font-medium text-blue-400">
                  {{ coin.price | number: '1.2-2' }} USD
                </p>
              }
            </div>
          }
        </div>
      </div>
    }

    <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
      <div class="rounded-lg border border-gray-800 bg-gray-950/80 p-6">
        <h4 class="mb-3 text-lg font-semibold text-white">¬øQu√© es Bitcoin?</h4>
        <p class="text-sm leading-relaxed text-gray-400">
          Bitcoin es la primera criptomoneda y funciona sobre una red descentralizada en blockchain. Su oferta m√°xima
          de 21 millones lo vuelve un activo escaso.
        </p>
      </div>

      <div class="rounded-lg border border-gray-800 bg-gray-950/80 p-6">
        <h4 class="mb-3 text-lg font-semibold text-white">¬øQu√© es el Market Cap?</h4>
        <p class="text-sm leading-relaxed text-gray-400">
          Es el valor de mercado de un activo: precio actual multiplicado por la cantidad circulante. Permite comparar
          tama√±o e importancia entre proyectos.
        </p>
      </div>

      <div class="rounded-lg border border-gray-800 bg-gray-950/80 p-6">
        <h4 class="mb-3 text-lg font-semibold text-white">¬øQu√© es una Stablecoin?</h4>
        <p class="text-sm leading-relaxed text-gray-400">
          Stablecoins buscan mantener un precio estable, generalmente ligado al d√≥lar (USDT, USDC, DAI). Son √∫tiles
          para operar sin volatilidad extrema.
        </p>
      </div>

      <div class="rounded-lg border border-gray-800 bg-gray-950/80 p-6">
        <h4 class="mb-3 text-lg font-semibold text-white">¬øQu√© es la volatilidad?</h4>
        <p class="text-sm leading-relaxed text-gray-400">
          Mide la rapidez y magnitud de los cambios de precio. Mayor volatilidad implica m√°s riesgos, pero tambi√©n
          mayores oportunidades.
        </p>
      </div>
    </div>

    <div class="rounded-lg border border-blue-900/40 bg-gradient-to-r from-blue-500/10 to-purple-600/10 p-6">
      <h3 class="mb-4 text-lg font-semibold text-white">üí° Consejos de inversi√≥n</h3>
      <ul class="space-y-2 text-sm text-gray-300">
        <li>‚Ä¢ Investig√° antes de invertir (DYOR) y us√° fuentes confiables.</li>
        <li>‚Ä¢ Invert√≠ solo el capital que est√©s dispuesto a perder.</li>
        <li>‚Ä¢ Diversific√° tu portafolio entre distintos activos y sectores.</li>
        <li>‚Ä¢ Proteg√© tus claves y us√° wallets seguras para montos relevantes.</li>
        <li>‚Ä¢ Evit√° decisiones impulsivas; segu√≠ un plan y gestion√° el riesgo.</li>
        <li>‚Ä¢ Mantenete informado sobre noticias y regulaciones del ecosistema.</li>
      </ul>
    </div>
  </div>
}

